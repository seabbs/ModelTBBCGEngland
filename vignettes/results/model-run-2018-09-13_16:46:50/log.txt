Plot historic number of pulmonary cases detected each year:
Saving 7 x 7 in image
Plot number of cases detected each year:
Saving 7 x 7 in image
Plot number of cases detected each year, stratified by age group:
Saving 7 x 7 in image
Load the model as a compiled libbi object
Sample priors
Summary of prior sampling
Wrapper around LibBi
======================
Model:  Baseline 
Run time:  84.49247  seconds
Number of samples:  1000 
State trajectories recorded:  S H L P E T_P T_E YearlyPulCases YearlyEPulCases YearlyPulDeaths YearlyEPulDeaths YearlyPAgeCases YearlyPCases YearlyEAgeCases YearlyECases YearlyAgeCases YearlyCases YearlyNonUKborn 
Parameters recorded:  M c_eff c_hist delta epsilon_h_0_4 epsilon_h_5_14 epsilon_h_15_89 kappa_0_4 kappa_5_14 kappa_15_89 epsilon_l_0_4 epsilon_l_5_14 epsilon_l_15_89 phi_0_14 phi_15_59 phi_60_89 Upsilon_0_14 Upsilon_15_59 Upsilon_60_89 rho_0_14 rho_15_59 rho_60_89 nu_p_0_14 nu_p_15_89 nu_e_0_14 nu_e_15_89 zeta_p_0_14 zeta_p_15_59 zeta_p_60_89 zeta_e_0_14 zeta_e_15_59 zeta_e_60_89 mu_p_0_14 mu_p_15_59 mu_p_60_89 mu_e_0_14 mu_e_15_59 mu_e_60_89 chi_init alpha_t_init alpha_t_decay HistMeasError 
Load priors
Plot priors
Plotting: densities
`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.
Saving 7 x 7 in image
`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.
Plotting: traces
Saving 7 x 7 in image
Optimising deterministic model
[1] "Launching LibBi with the following commands:"
[1] "cd /tmp/RtmpETICEP/Baselined4c52f7ef09;/usr/local/bin/libbi optimise --seed 1249654503 --input-file /tmp/RtmpETICEP/Baselined4c52f7ef09/Baseline_inputd4c532ead4c2.nc --obs-file /tmp/RtmpETICEP/Baselined4c52f7ef09/Baseline_obsd4c56ddd5c73.nc --end-time 73 --noutputs 73 --nparticles 1 --nthreads 8 --verbose --stop-steps 500 --output-file /tmp/RtmpETICEP/Baselined4c52f7ef09/Baseline_outputd4c5454faa86.nc --model-file /tmp/RtmpETICEP/Baselined4c52f7ef09/Baseline_modeld4c5625ba1d6.bi "
[2] ""                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
[1] "... LibBi has finished!"
Fitting using PMCMC
[1] "Launching LibBi with the following commands:"
[1] "cd /tmp/RtmpETICEP/Baselined4c52f7ef09;/usr/local/bin/libbi sample --seed 1219576985 --input-file /tmp/RtmpETICEP/Baselined4c52f7ef09/Baseline_inputd4c532ead4c2.nc --obs-file /tmp/RtmpETICEP/Baselined4c52f7ef09/Baseline_obsd4c56ddd5c73.nc --end-time 73 --noutputs 73 --nparticles 1 --nthreads 8 --verbose --init-file /tmp/RtmpETICEP/Baselined4c52f7ef09/Baseline_initd4c540a7869.nc --target posterior --nsamples 1000 --output-file /tmp/RtmpETICEP/Baselined4c52f7ef09/Baseline_outputd4c579fd4c00.nc --model-file /tmp/RtmpETICEP/Baselined4c52f7ef09/Baseline_modeld4c55c1c734e.bi "
[2] ""                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
[1] "... LibBi has finished!"
Summary of fitted model
Wrapper around LibBi
======================
Model:  Baseline 
Run time:  372.7722  seconds
Number of samples:  1000 
State trajectories recorded:  S H L P E T_P T_E YearlyPulCases YearlyEPulCases YearlyPulDeaths YearlyEPulDeaths YearlyPAgeCases YearlyPCases YearlyEAgeCases YearlyECases YearlyAgeCases YearlyCases YearlyNonUKborn 
Observation trajectories recorded:  YearlyHistPInc YearlyInc YearlyAgeInc 
Parameters recorded:  M c_eff c_hist delta epsilon_h_0_4 epsilon_h_5_14 epsilon_h_15_89 kappa_0_4 kappa_5_14 kappa_15_89 epsilon_l_0_4 epsilon_l_5_14 epsilon_l_15_89 phi_0_14 phi_15_59 phi_60_89 Upsilon_0_14 Upsilon_15_59 Upsilon_60_89 rho_0_14 rho_15_59 rho_60_89 nu_p_0_14 nu_p_15_89 nu_e_0_14 nu_e_15_89 zeta_p_0_14 zeta_p_15_59 zeta_p_60_89 zeta_e_0_14 zeta_e_15_59 zeta_e_60_89 mu_p_0_14 mu_p_15_59 mu_p_60_89 mu_e_0_14 mu_e_15_59 mu_e_60_89 chi_init alpha_t_init alpha_t_decay HistMeasError 
Plot posterior
Plotting: densities
`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.
Saving 7 x 7 in image
`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.
Plotting: traces
Saving 7 x 7 in image
Model DIC: 140649231.982653
Creating model report


processing file: model_report.Rmd
  |                                                                         |                                                                 |   0%  |                                                                         |..                                                               |   3%
   inline R code fragments

  |                                                                         |....                                                             |   7%
label: setup (with options) 
List of 1
 $ include: logi FALSE

  |                                                                         |......                                                           |  10%
  ordinary text without R code

  |                                                                         |.........                                                        |  13%
label: packages (with options) 
List of 1
 $ include: logi FALSE

  |                                                                         |...........                                                      |  17%
  ordinary text without R code

  |                                                                         |.............                                                    |  20%
label: load-model
  |                                                                         |...............                                                  |  23%
  ordinary text without R code

  |                                                                         |.................                                                |  27%
label: unnamed-chunk-1
  |                                                                         |....................                                             |  30%
  ordinary text without R code

  |                                                                         |......................                                           |  33%
label: auto-corr-plot
  |                                                                         |........................                                         |  37%
  ordinary text without R code

  |                                                                         |..........................                                       |  40%
label: posterior-traces (with options) 
List of 2
 $ fig.width : num 16
 $ fig.height: num 16

  |                                                                         |............................                                     |  43%
  ordinary text without R code

  |                                                                         |..............................                                   |  47%
label: prior-posterior-overview (with options) 
List of 2
 $ fig.height: num 16
 $ fig.width : num 16

  |                                                                         |................................                                 |  50%
  ordinary text without R code

  |                                                                         |...................................                              |  53%
label: param-overview (with options) 
List of 2
 $ fig.height: num 16
 $ fig.width : num 16

  |                                                                         |.....................................                            |  57%
  ordinary text without R code

  |                                                                         |.......................................                          |  60%
label: overview-states (with options) 
List of 2
 $ fig.height: num 16
 $ fig.width : num 16

  |                                                                         |.........................................                        |  63%
  ordinary text without R code

  |                                                                         |...........................................                      |  67%
label: overview-states-1990 (with options) 
List of 2
 $ fig.height: num 16
 $ fig.width : num 16

  |                                                                         |..............................................                   |  70%
  ordinary text without R code

  |                                                                         |................................................                 |  73%
label: overview-states-1990-obs
  |                                                                         |..................................................               |  77%
  ordinary text without R code

  |                                                                         |....................................................             |  80%
label: unnamed-chunk-2
Quitting from lines 122-155 (model_report.Rmd) 
Error: Column `Age` must be length 0 (the group size) or one, not 15
In addition: Warning messages:
1: In readLines(filename) :
  incomplete final line found on '/usr/local/lib/R/site-library/ModelTBBCGEngland/bi/BaseLineModel.bi'
2: In plot.libbi(priors, plot = FALSE) :
  Correlations plot currently deactivated because of problems with the 'GGally' package
3: In plot.libbi(priors, plot = FALSE) :
  Pairs plot currently deactivated because of problems with the 'GGally' package
4: In `[.data.table`(dataset, is.na(get(col)), `:=`(paste(col), "n/a")) :
  NAs introduced by coercion
5: In `[.data.table`(dataset, is.na(get(col)), `:=`(paste(col), "n/a")) :
  Coerced 'character' RHS to 'integer' to match the column's type. Either change the target column ['age'] to 'character' first (by creating a new 'character' vector length 274 (nrows of entire table) and assign that; i.e. 'replace' column), or coerce RHS to 'integer' (e.g. 1L, NA_[real|integer]_, as.*, etc) to make your intent clear and for speed. Or, set the column type correctly up front when you create the table and stick to it, please.
6: In plot.libbi(tb_model, plot = FALSE) :
  Correlations plot currently deactivated because of problems with the 'GGally' package
7: In plot.libbi(tb_model, plot = FALSE) :
  Pairs plot currently deactivated because of problems with the 'GGally' package
8: Column `state` joining factor and character vector, coercing into character vector 

Execution halted
